---
description: 
globs: 
alwaysApply: true
---
# Regras Completas de Performance para Cursor IDE

## üìè Limites de Linhas por Arquivo

### Limites M√°ximos Recomendados:
- **Componentes React/Vue**: 200 linhas
- **Fun√ß√µes utilit√°rias**: 100 linhas
- **Arquivos de configura√ß√£o**: 150 linhas
- **Testes**: 300 linhas
- **Tipos/Interfaces**: 150 linhas
- **Servi√ßos/APIs**: 250 linhas
- **Hooks customizados**: 100 linhas

### A√ß√µes quando exceder limites:
1. **Refatorar em componentes menores**
2. **Extrair l√≥gica para hooks ou utilit√°rios**
3. **Dividir em m√∫ltiplos arquivos relacionados**
4. **Criar subpastas quando necess√°rio**

## üóÇÔ∏è Estrutura de Pastas Obrigat√≥ria

### Frontend (React/Next.js):
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/           # Componentes base (Button, Input, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ forms/        # Formul√°rios espec√≠ficos
‚îÇ   ‚îî‚îÄ‚îÄ layout/       # Header, Footer, Sidebar
‚îú‚îÄ‚îÄ pages/ ou app/    # P√°ginas/rotas
‚îú‚îÄ‚îÄ hooks/            # Hooks customizados
‚îú‚îÄ‚îÄ utils/            # Fun√ß√µes utilit√°rias
‚îú‚îÄ‚îÄ services/         # Chamadas API
‚îú‚îÄ‚îÄ types/            # Defini√ß√µes TypeScript
‚îú‚îÄ‚îÄ constants/        # Constantes da aplica√ß√£o
‚îî‚îÄ‚îÄ styles/           # Estilos globais
```

### Backend (Node.js/Express):
```
src/
‚îú‚îÄ‚îÄ controllers/      # Controladores de rotas
‚îú‚îÄ‚îÄ services/         # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ models/           # Modelos de dados
‚îú‚îÄ‚îÄ middleware/       # Middlewares
‚îú‚îÄ‚îÄ routes/           # Defini√ß√£o de rotas
‚îú‚îÄ‚îÄ utils/            # Fun√ß√µes utilit√°rias
‚îú‚îÄ‚îÄ config/           # Configura√ß√µes
‚îî‚îÄ‚îÄ types/            # Tipos TypeScript
```

## ‚õî Arquivos Desnecess√°rios - N√ÉO CRIAR

### Evitar sempre:
- ‚ùå **Arquivos de exemplo n√£o utilizados** (sample.js, test.js vazios)
- ‚ùå **Duplicatas** (component.jsx e component.tsx)
- ‚ùå **Arquivos tempor√°rios** (temp.js, backup.js)
- ‚ùå **Configs redundantes** (m√∫ltiplos .env para mesmo ambiente)
- ‚ùå **Componentes gen√©ricos demais** (Container.jsx, Wrapper.jsx)
- ‚ùå **Utilit√°rios de uma linha** (criar arquivo s√≥ para `export const sum = (a,b) => a+b`)

### Quando N√ÉO criar novo arquivo:
- Se a funcionalidade cabe em menos de 20 linhas
- Se ser√° usada em apenas um local
- Se j√° existe funcionalidade similar

## ‚úÖ Regras de Cria√ß√£o de Arquivos

### SEMPRE criar quando:
1. **Componente** ser√° reutilizado em 2+ lugares
2. **L√≥gica** tem mais de 50 linhas
3. **Funcionalidade** tem responsabilidade √∫nica clara
4. **Teste** para cada componente/fun√ß√£o principal

### Nomenclatura obrigat√≥ria:
- **Componentes**: PascalCase (UserProfile.tsx)
- **Utilit√°rios**: camelCase (formatDate.ts)
- **Constantes**: UPPER_SNAKE_CASE (API_URLS.ts)
- **Hooks**: camelCase com "use" (useUserData.ts)

## üßπ Manuten√ß√£o Autom√°tica

### Regras de limpeza semanal:
1. **Remover imports n√£o utilizados**
2. **Deletar arquivos sem refer√™ncias**
3. **Consolidar fun√ß√µes similares**
4. **Revisar TODOs e FIXMEs**

### Comandos √∫teis:
```bash
# Encontrar arquivos n√£o utilizados
npx unimported

# Remover imports desnecess√°rios
npx eslint --fix

# Analisar tamanho dos arquivos
find src -name "*.ts" -o -name "*.tsx" | xargs wc -l | sort -n
```

## üìã Checklist antes de commit

- [ ] Nenhum arquivo excede o limite de linhas
- [ ] Todos os imports est√£o sendo usados
- [ ] Nomes de arquivo seguem conven√ß√£o
- [ ] N√£o h√° arquivos tempor√°rios
- [ ] Estrutura de pastas est√° correta
- [ ] Funcionalidades similares est√£o agrupadas

## üö® Alertas Autom√°ticos

Configure no seu `.cursorrules` ou `eslint.config.js`:

```javascript
// Alerta para arquivos muito grandes
"max-lines": ["error", {
  "max": 200,
  "skipBlankLines": true,
  "skipComments": true
}],

// Alerta para fun√ß√µes muito grandes
"max-lines-per-function": ["error", {
  "max": 50,
  "skipBlankLines": true,
  "skipComments": true
}]
```

## üéØ Princ√≠pios Fundamentais

1. **Um arquivo, uma responsabilidade**
2. **Reutiliza√ß√£o antes de duplica√ß√£o**
3. **Clareza sobre brevidade**
4. **Consist√™ncia em nomenclatura**
5. **Manutenibilidade acima de tudo**

## üöÄ Regras de Performance do Cursor IDE

### Performance de Indexa√ß√£o
```json
// .vscode/settings.json
{
  "cursor.ai.indexing.maxFileSize": 1000000,
  "cursor.ai.indexing.excludePatterns": [
    "**/node_modules/**",
    "**/dist/**",
    "**/build/**",
    "**/.git/**",
    "**/coverage/**",
    "**/*.log",
    "**/tmp/**"
  ],
  "files.watcherExclude": {
    "**/node_modules/**": true,
    "**/dist/**": true,
    "**/build/**": true,
    "**/.git/**": true
  }
}
```

### Estrutura de .gitignore para Performance
```gitignore
# Performance cr√≠tica - nunca commitar
node_modules/
dist/
build/
.next/
.nuxt/
coverage/
.cache/
.parcel-cache/
.vite/

# Logs que prejudicam indexa√ß√£o
*.log
logs/
npm-debug.log*
yarn-debug.log*

# Arquivos tempor√°rios
.tmp/
tmp/
*.tmp
*.swp
.DS_Store
Thumbs.db
```

### Limites de Context Window
- **Prompt m√°ximo**: 2000 tokens por intera√ß√£o
- **Arquivos no contexto**: m√°ximo 5 arquivos simultaneamente
- **Quebrar grandes refatora√ß√µes** em chunks menores
- **Usar @workspace** com parcim√¥nia

### Estrat√©gias de Memory Management
```javascript
// Cursor Rules para gerenciamento de mem√≥ria
{
  "cursor.ai.context.maxTokens": 8000,
  "cursor.ai.context.prioritize": "current-file",
  "cursor.ai.completion.maxSuggestions": 3,
  "cursor.ai.codebase.indexing": "selective"
}
```

## ‚ö° Otimiza√ß√µes de Workspace

### Configura√ß√£o de TypeScript para Performance
```json
// tsconfig.json otimizado
{
  "compilerOptions": {
    "incremental": true,
    "composite": true,
    "skipLibCheck": true,
    "skipDefaultLibCheck": true
  },
  "exclude": [
    "node_modules",
    "dist",
    "build",
    "coverage"
  ]
}
```

### ESLint Performance Rules
```javascript
// eslint.config.js
export default {
  ignorePatterns: [
    'dist/',
    'build/',
    'node_modules/',
    '*.min.js'
  ],
  rules: {
    // Performance cr√≠tica
    "no-unused-vars": "error",
    "no-unreachable": "error",
    "no-constant-condition": "error",
    
    // Limites que ajudam o Cursor
    "max-depth": ["error", 4],
    "max-params": ["error", 5],
    "complexity": ["error", 10]
  }
}
```

## üéØ Regras de Prompt Engineering

### Prompts Eficientes
```markdown
‚ùå MAU: "Fa√ßa um componente completo com todas as funcionalidades"
‚úÖ BOM: "Crie componente Button com props: variant, size, onClick"

‚ùå MAU: "Refatore todo o projeto"  
‚úÖ BOM: "Extraia l√≥gica de autentica√ß√£o do UserProfile.tsx para hook"

‚ùå MAU: "Explique todo o c√≥digo"
‚úÖ BOM: "Explique a fun√ß√£o validateUser (linhas 45-60)"
```

### Uso Estrat√©gico de @ Symbols
- **@workspace**: Apenas para contexto geral (m√°ximo 1x por sess√£o)
- **@file**: Para arquivos espec√≠ficos (m√°ximo 3 por prompt)
- **@code**: Para trechos espec√≠ficos de c√≥digo
- **@docs**: Apenas quando necess√°rio (consome muito contexto)

## üîß Configura√ß√µes Avan√ßadas

### .cursorrules Otimizado
```yaml
# Performance Rules
max_context_files: 5
preferred_response_length: "concise"
code_style: "consistent_with_project"

# Exclude from AI context
exclude_patterns:
  - "**/*.min.js"
  - "**/*.bundle.js"
  - "**/vendor/**"
  - "**/.vscode/**"
  - "**/coverage/**"

# Priority files for context
priority_files:
  - "src/**/*.tsx"
  - "src/**/*.ts"
  - "*.config.js"
  - "package.json"
```

### Configura√ß√£o de Extensions
```json
// Extens√µes que melhoram performance
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode"
  ],
  "unwantedRecommendations": [
    // Extens√µes que conflitam com Cursor
    "ms-vscode.vscode-copilot",
    "tabnine.tabnine-vscode"
  ]
}
```

## üìä Monitoramento de Performance

### M√©tricas Importantes
- **Tempo de indexa√ß√£o**: < 30 segundos
- **Resposta do autocomplete**: < 1 segundo  
- **Tamanho do workspace**: < 500MB
- **Arquivos indexados**: < 5000 arquivos

### Comandos de Diagn√≥stico
```bash
# Verificar tamanho do projeto
du -sh . && find . -type f | wc -l

# Limpar cache do Cursor
rm -rf ~/.cursor/cache/

# Verificar arquivos grandes
find . -type f -size +1M -not -path "./node_modules/*"
```

## üö® Red Flags de Performance

### Evitar Absolutamente:
- ‚ùå **Arquivos > 2MB** no workspace
- ‚ùå **Pastas com +1000 arquivos**
- ‚ùå **Imports circulares** 
- ‚ùå **Logs extensos** commitados
- ‚ùå **M√∫ltiplos package.json** desnecess√°rios
- ‚ùå **Depend√™ncias n√£o utilizadas**

### Sinais de Problema:
- Cursor trava por +10 segundos
- Autocompletar demora +3 segundos
- Chat retorna "context too large"
- Indexa√ß√£o nunca termina

## üîÑ Rotina Semanal de Otimiza√ß√£o

### Segunda-feira:
- Limpar cache do Cursor
- Verificar tamanho do workspace
- Remover logs antigos

### Quarta-feira:
- Auditar depend√™ncias (`npm audit`)
- Limpar node_modules desnecess√°rios
- Verificar .gitignore

### Sexta-feira:
- Rodar `npm run lint --fix`
- Verificar arquivos grandes
- Backup de configura√ß√µes

## üí° Dicas Avan√ßadas

### Para Projetos Grandes (>50 arquivos):
1. **Use workspaces** separados por feature
2. **Configure m√∫ltiplos .cursorrules** por pasta
3. **Limite contexto** a uma feature por vez
4. **Use tags** para organizar prompts

### Para Melhor Context Awareness:
```javascript
// Adicione coment√°rios estrat√©gicos
/**
 * @cursor This component handles user authentication
 * @dependencies: useAuth, UserService
 * @related: LoginForm.tsx, AuthProvider.tsx
 */

```